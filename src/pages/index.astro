---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import ContentTitle from '../components/typography/ContentTitle.astro';
import ContentBody from '../components/typography/ContentBody.astro';
import ContentParagraph from '../components/typography/ContentParagraph.astro';
import Hero from '../components/Hero.astro';
import IconLinkedin from '../components/icons/IconLinkedin.astro';
import IconGithub from '../components/icons/IconGithub.astro';
import IconFacebook from '../components/icons/IconFacebook.astro';
import IconArrowRight1 from '../components/icons/IconArrowRight1.astro';

const experiences = await getCollection('experience');
experiences.sort((a, b) => (a.data.yearStart < b.data.yearStart ? 1 : -1));

const expStartYear = experiences.reduce(
  (acc, cur) => (cur.data.yearStart < acc ? cur.data.yearStart : acc),
  Number.MAX_VALUE,
);
---

<Layout title='Home' pageName='home'>
  <Hero>
    <a
      href='#blog'
      class='inline-flex justify-between items-center py-1 px-1 pr-4 mb-7 text-sm text-gray-700 bg-gray-100 rounded-full bg-gray-800 text-white hover:bg-gray-200 hover:bg-gray-700'
      role='alert'
    >
      <span
        class='text-xs bg-primary-600 rounded-full text-white px-4 py-1.5 mr-3'
      >
        Heads up!</span
      >
      <span class='text-sm font-medium'>See what's new in blog</span>
      <IconArrowRight1 />
    </a>
    <h1
      class='mb-4 text-4xl font-extrabold tracking-tight leading-none text-gray-900 md:text-5xl lg:text-6xl text-white'
    >
      Software Engineer's portfolio
    </h1>
    <p
      class='mb-8 text-lg font-normal text-gray-500 lg:text-xl sm:px-16 xl:px-48'
    >
      I've been writing and shipping software since {expStartYear}. This
      portfolio website is a quintessence of my experience with facts, not
      opinions.
    </p>
    <div
      class='px-4 mx-auto text-center md:max-w-screen-md lg:max-w-screen-lg lg:px-36'
    >
      <span class='font-semibold text-gray-400 uppercase'>FEATURED IN</span>
      <div
        class='flex flex-wrap justify-center items-center mt-8 text-gray-500 sm:justify-between'
      >
        {
          [
            { href: '#linkedin', icon: <IconLinkedin />, text: 'Linkedin' },
            { href: '#github', icon: <IconGithub />, text: 'Github' },
            { href: '#facebook', icon: <IconFacebook />, text: 'Facebook' },
          ].map((item) => (
            <a
              href={item.href}
              class='mr-5 mb-5 lg:mb-0 hover:text-gray-400 flex gap-x-4 items-center'
            >
              {item.icon}
              <p class='font-semibold text-lg'>{item.text}</p>
            </a>
          ))
        }
      </div>
    </div>
  </Hero>
  <div
    class='max-w-[540px] sm:max-w-[604px] md:max-w-[720px] lg:max-w-[972px] xl:max-w-full xl:px-12 2xl:max-w-[1400px] mx-auto'
  >
    <div class='mx-auto max-w-7xl px-6 lg:px-8 my-8'>
      <ContentTitle>Experience</ContentTitle>
      <ContentBody>
        <ul role='list'>
          {
            experiences.map((exp) => (
              <li class='flex justify-between gap-x-6'>
                <ContentParagraph>
                  {exp.data.company}
                  {', '}
                  {exp.data.yearStart}
                  {' - '}
                  {exp.data.now ? 'now' : exp.data.yearEnd}
                  {', '}
                  {exp.data.position}
                </ContentParagraph>
              </li>
            ))
          }
        </ul>
      </ContentBody>
    </div>
    <div class='mx-auto max-w-7xl px-6 lg:px-8 my-8'>
      <ContentTitle>Technical expertise</ContentTitle>
      <ContentBody>
        <ContentParagraph>
          JavaScript, Typescript, React, Redux, Astro, Remix, Domvm, Backbone,
          jQuery
        </ContentParagraph>
        <ContentParagraph>
          HTML, CSS, Pre-Processors, Semantic Markup, Responsive Design
        </ContentParagraph>
        <ContentParagraph>Rollup, Vite, Webpack, Gulp, Grunt</ContentParagraph>
        <ContentParagraph>ThreeJS, Graphics 2D</ContentParagraph>
        <ContentParagraph>
          Node, Koa, Express, CouchDB, Mongo, My/MS Sql
        </ContentParagraph>
        <ContentParagraph>
          Hybris, AEM, Sitecore, Prismic, ATG, DotNetNuke
        </ContentParagraph>
        <ContentParagraph>AB Testing</ContentParagraph>
      </ContentBody>
    </div>
    <div class='mx-auto max-w-7xl px-6 lg:px-8 my-8'>
      <ContentTitle>Languages</ContentTitle>
      <ContentBody>
        <ContentParagraph>English: B2 (Intermediate)</ContentParagraph>
        <ContentParagraph>Russian, Ukrainian: native</ContentParagraph>
        <ContentParagraph>Polish: A1 (beginner)</ContentParagraph>
      </ContentBody>
    </div>
  </div>
</Layout>
